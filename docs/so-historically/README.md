# Так исторически сложилось

> Вопрос: Почему название товара в БД разделено на три поля?
>
> Ответ: A long time ago in a galaxy…

Нейронные сети, искусственный интеллект, смартфоны, плафоны, DBF… Что же это все объединяет? Все это можно увидеть на некоторых реальных предприятиях на постсоветском пространстве! Правда, первые две технологии используются в третей, а третья используется сугубо по назначению – развлечение.

## Как же так получилось

В Советском Союзе промышленность шла своим неповторимым путем (не будем брать оборонку). После развала союза те предприятия, что сумели выжить, стали изыскивать ресурсы на внедрение компьютерной техники. Плодились отделы АСУ, закупались компьютеры и матричные принтеры. Тут и стал вопрос о программном обеспечении.

Одно дело набрать текст и вывести его на печать, чтобы через месяц снова открыть файл, поменять в нем дату и снова распечатать, другое дело сделать анализ данных о финансовом состоянии всего предприятия. Так что первые программы, написанные в отделах АСУ, были направлены на составление и вывод на печать отчетов. Отчет – конечная цель работы программы (как впрочем и пользователя). Распечатал, подписал, сдал. Цель достигнута! Один пользователь – одно рабочее место – один `"АРМ"` (автоматизированное рабочее место, если кто не знает).

Для своего времени программы такого рода были большим шагом вперед, они действительно позволяли не только ускорить и облегчить труд работников, но систематизировать задачи, ими выполняемые. Для каждой программы был собственный набор первичных данных, который сам пользователь вносил, корректировал и поддерживал в актуальном состоянии.

Однако список задач, устанавливаемых перед отделам АСУ, продолжал расширяться. Появилась необходимость в общем, для нескольких программ, источнике первичной информации. Так как для каждой задачи был свой набор данных, да и сама задача никак не контактировала с иными задачами предприятия, то вопрос обмена данными был достаточно сложным. Сетевые технологии на тот момент только начинали зарождаться так что обмен информацией происходил простым копированием данных (а зачастую и целых баз данных) с помощью дискет. Синхронизацию данных облегчало то, что софт, разрабатываемый на самом предприятии и для его нужд, использовал одну и туже структуру данных, один и тот же `"арм"` в качестве заготовки, на основании которого и создавался новый `"арм"`. Это ускоряло разработку в первую очередь пользовательского интерфейса, так что можно сказать, что на каждом предприятии был собственный `"фреймворк"`, на котором и писался новый софт.

Появление `DBF`, развитие сетевых технологий (особенно сети `NetWare`) подстегнули разработчиков изменить подход к написанию программ. Теперь уже стали отдельно выделяться модули НСИ, которые использовались для пользовательского редактирования общих справочников. Сами же общие справочники хранились на общедоступных сетевых ресурсах. Задачи либо делали выборку прямо из этих таблиц, либо (наиболее часто) копировались на локальные машины и выборка происходила уже оттуда. Информация, получаемая в результате работы программы, так же записывалась в БД, в основном локальную, после чего данные копировались на общие ресурсы либо в конце дня ("закрытие дня") либо в конце месяца ("закрытие месяца"), после чего локальная база очищалась и была снова готова к использованию.

Настоящий фурор на постсоветском пространстве вызвало появление `1С-Предприятие`. Возможность работы нескольких пользователей одновременно в единой базе данных без необходимости постоянного копирования с места на место просто поражала. Однако на некоторых предприятиях (особенно крупных) `1С-Предприятие` прижиться не смогло по ряду причин: зачастую на подобных предприятиях уже были реализованы сложные системы управления, написанные исключительно для нужд предприятия, а предлагаемые решения от фирм-франчайзи содержали типовые решения, которые нужно было дорабатывать; сложность переноса данных из старых систем да и вообще сложность перехода; необходимость обучения персонала; просто нежелание:). Однако средние и мелкие предприятия, перешедшие на `1С-Предприятие` также требовали постоянной доработки конфигураций, ибо проблем хватало: обмен данными с удаленными филиалами, синхронизация данных различных конфигураций, падение производительности при росте объема БД и числа пользователей.

::: tip
Конечно, были и другие системы управления предприятием, и их было достаточно много, однако тот факт, что `1С-Предприятие 7.7` появилась на рынке в 1999 году, в 2011 было изъято с прейскурантов компании-разработчика, но и по сегодняшний день спрос на конфигурации остается большим, а использование в мелком бизнесе – значительным, говорит об успешности этого программного продукта (на сегодняшний день на одной флешке можно не только носить несколько крупных баз данных, но и работать с ними в сетевом режиме). Непритязательность, невысокий порог вхождения, наличие уже проверенных временем решений почти по всем направлениям хозяйственной деятельности, наличие дополнительных библиотек, расширяющих основной функционал – все это продолжает привлекать пользователей.

Современные `ERP-системы` требуют больших ресурсов, аппаратного обеспечения, серверов, сторонних СУБД – не в пример трудяге "семерке 1С" на `DBF`. Но дают больше: прежде всего многозадачность, надежность хранения данных, большое число пользователей, все современные возможности, удаленный доступ через `WEB`, красивый богатый пользовательский интерфейс. На текущий момент их большое количество, у каждого свои преимущества, свои недостатки.
:::

Однако интересна судьба тех предприятий, который так и не перешли на "покупной" софт и продолжают использовать свои наработки и программы. В идеальном случае их программы не только сопровождаются, но и развиваются, расширяется их функционал и возможности. Исчезли сети `NetWare`, `dBase` тоже признано пережитком прошлого, пользователь требует тесного обмена данными между задачами. Для этого команда программистов предприятия слаженно дорабатывают и развивают свою информационную систему. Но это в идеале…

::: tip
Реальность же зачастую совсем иная. Если предприятие в начале нулевых шло в ногу со временем, то по прошествии 10-15 лет изменились прежде всего… люди! За 10 лет состав команды разработчиков наверняка претерпел глобальные изменения, первичный энтузиазм первых разработчиков погас в повседневной рутине, взгляды на сам подход к  программированию или изменился или остался на уровне нулевых (что очень печально). Новые люди, приходящие в команду, наверняка вносили в проект свои актуальные на то время идеи и тенденции, расширяя список используемых технологий. Приходили и, зачастую, уходили дальше, оставляя за собой уже написанный софт, который нужно было сопровождать и развивать. Роль управления на этом этапе – наиважнейшая. Именно руководитель должен задавать общее направление развития, отсеивать заведомо ненужные, избыточные технологии и подходы к программированию. Именно это позволит из набора разрозненных `"армов"` создать собственную систему управления предприятием. И снова это в идеале…
:::

::: tip
Мода на языки программирования может нанести большой вред предприятию, если программное обеспечение для предприятия пишется им самим. Активному разработчику так соблазнительно попробовать что-то новое, тем более что это новое презентуется как эффективный и легкий способ достигнуть цели. Вчера он программировал на `FoxPro`, сегодня все хвалят `Delphi`,  завтра -  `C#`. Похвально, что программист успевает выучить все это, еще более похвально, если он успевает реализовать на новом языке хоть одну задачу. Но для самого предприятия это не лучший вариант: стоит такому программисту уволиться, и поддерживать весь оставленный софт некому (или вариант – найти еще одного такого разностороннего специалиста). Еще хуже, если программист постоянно переписывает задачу на новых языках или технологиях, но ничего нового в функционал программы не вносит. Да и саму структуру БД в таких случаях меняют редко, что бы обеспечить совместимость версий. Так что подход к структуре БД, сформированный еще на `FoxPro`, плавно перетекает в `C#`.

И опять на первый план выходит руководитель. Именно он должен направить силы и время программиста в нужное русло, а сделать это порой очень не просто: намного интересней изучать что-то новое, чем разбираться в старом коде вылавливая ошибку, всплывающую только во время формирования годового отчета.
:::

Так что на текущий монет на предприятии, избравшем путь развития своего программного обеспечения собственными силами и отказавшихся от сторонних `ERP-систем`, в информационной системе может оказаться колоритная мешанина из технологий, языков программирования и СУБД. Что бы держать все это в рабочем состоянии, руководство наверняка распределит зоны ответственности по отдельным программистам: каждый получит несколько `"армов"` для сопровождения (обычно связанных как по способу построения, так и по смежным направлениям описываемых хозяйственных операций), то способствует его изоляции, отрыва от остального коллектива (в худшем случае коллеги просто будут не знать, чем он занимается). Это в свою очередь ведет к тому, что для каждого ряда задач будут создаваться новые справочники, хотя подобные уже используются в других задачах, курируемых другим программистом. Как итог – отсутствие единого НСИ предприятия, но наличие нескольких локальных. Структура таблиц таких справочников сформирована еще для `dBase`, потом, вероятно, перенесена на современные СУБД, подвергнута рефакторингу. Однако переименовать поля и изменить их типы, удалить неиспользуемые колонки и проставить ключи порой оказывается мало, что бы добиться действительно удобной и эффективной структуры БД, а более серьезные изменения, такие как разбиение таблиц на несколько новых, иногда провести очень сложно, так как следует переносить и уже внесенные данные.

Вот и получается, что в эксплуатируемых справочниках "зависает наследие прошлого".
